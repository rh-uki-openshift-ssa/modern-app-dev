<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vulnerability Management in Kubernetes with Red Hat Advanced Cluster Security :: OpenShift Roadshow Workshop 2024</title>
    <link rel="canonical" href="http://localhost:3000/rhs-openshift-starter-guides/index.html/ocp-roadshow-workshop/4.15/14-acs-vulnerability.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () { 
      const urlParams = new URLSearchParams(window.location.search);
      const clusterName = urlParams.get('CLUSTER_SUBDOMAIN');
      const projectName = urlParams.get('PROJECT');
      if (clusterName) {
        showCluster( clusterName );
      }
      else {
        showClusterForm();
      }

      if (projectName) {
        showProject( projectName );
      } else {
        showProjectForm();
      }
    } );


    function sliceCluster(clusterName){
      if (clusterName.length > 70) {
          return "..." + clusterName.slice(35);
      } else {
          return clusterName;
      }
    }

    function showCluster( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "none";
      document.getElementById('navbar-form-filled').style.display = "flex";
      document.getElementById('cluster_subdomain').textContent = sliceCluster(clusterName);
      document.getElementById('clusterfield2').value = clusterName;

    }

    function showClusterForm( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "flex";
      document.getElementById('navbar-form-filled').style.display = "none";
    }

    function gowithcluster() {
      elClusterInput = document.getElementById('clusterfield');
      elProjectInput = document.getElementById('projectfield2');

      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

    function showProject( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "none";
      document.getElementById('navbar-form-project-filled').style.display = "flex";
      document.getElementById('project').textContent = projectName;
      document.getElementById('projectfield2').value = projectName;
    }

    function showProjectForm( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "flex";
      document.getElementById('navbar-form-project-filled').style.display = "none";
    }

    function gowithproject() {
      elProjectInput = document.getElementById('projectfield');
      elClusterInput = document.getElementById('clusterfield2');
      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://localhost:3000/rhs-openshift-starter-guides/index.html">OpenShift Roadshow Workshop 2024</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item" id="navbar-form-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithcluster();">
            <input size="40" id="clusterfield" type="text" placeholder="Enter Cluster Subdomain">
            <input type="hidden" id="projectfield2" name="projectfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="cluster_subdomain"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

         <div class="navbar-item" id="navbar-form-project-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithproject();">
            <input size="40" id="projectfield" type="text" placeholder="Enter Project Name">
            <input type="hidden" id="clusterfield2" name="clusterfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-project-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="project"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>
<!---
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-scholars.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
--->
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="ocp-roadshow-workshop" data-version="4.15">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OCP Roadshow Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-modernisation-introduction.html">Application Migration &amp; Modernisation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-introduction.html"><strong>01</strong> - Migration Workshop Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-assessment.html"><strong>02</strong> - Migration Assessment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-analyze.html"><strong>03</strong> - Migration Analysis</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="10-security-infrastructure-introduction.html">Security &amp; Infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="09-installation-and-verification.html"><strong>04</strong> - Installation and Verificiation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-app-mgmt-basics.html"><strong>05</strong> - Application Management Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-app-storage-basics.html"><strong>06</strong> - Application Storage Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-networking.html"><strong>07</strong> - Networking</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="14-acs-vulnerability.html"><strong>08</strong> - ACS Vulnerability Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15-acm.html"><strong>09</strong> - ACM multicluster Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OCP Roadshow Workshop</span>
    <span class="version">4.15</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OCP Roadshow Workshop</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">4.15</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OCP Roadshow Workshop</a></li>
    <li><a href="10-security-infrastructure-introduction.html">Security &amp; Infrastructure</a></li>
    <li><a href="14-acs-vulnerability.html"><strong>08</strong> - ACS Vulnerability Management</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/marrober/data/git-repos/rhuki-openshift-ssa/modern-app-dev/documentation/modules/ROOT/pages/14-acs-vulnerability.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Vulnerability Management in Kubernetes with Red Hat Advanced Cluster Security</h1>
<div class="sect1">
<h2 id="_goal_of_the_workshop"><a class="anchor" href="#_goal_of_the_workshop"></a>Goal of the Workshop</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This 30-minute session aims to get accustomed to identifying vulnerabilities in Kubernetes using the ACS dashboard. The session will discuss what makes particular vulnerabilities different and how to effectively implement controls in a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>This workshop will focus on the log4shell export. However, multiple applications will be deployed in this use case. If you have time in the end, please explore the interface to see if you can find more security features that may help your use cases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_red_hat_advanced_cluster_security_for_kubernetes_basics"><a class="anchor" href="#_red_hat_advanced_cluster_security_for_kubernetes_basics"></a>Red Hat Advanced Cluster Security for Kubernetes Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Advanced Cluster Security for Kubernetes (RHACS or ACS for short) provides the tools and capabilities to address the security needs of a cloud-native development approach on Kubernetes.</p>
</div>
<div class="paragraph">
<p>The ACS solution offers visibility into the security of your cluster, vulnerability management, and security compliance through auditing, network segmentation awareness and configuration, security risk profiling, security-related configuration management, threat detection, and incident response. In addition, ACS grants an ability to pull the actions from that tooling deep into the application code development process through APIs.</p>
</div>
<div class="paragraph">
<p>These security features represent any developer or administrator&#8217;s primary work as they work across various environments, including multiple datacenters, private clouds, or public clouds that run Kubernetes clusters.</p>
</div>
<div class="sect2">
<h3 id="_acs_features"><a class="anchor" href="#_acs_features"></a>ACS Features</h3>
<div class="paragraph">
<p>Using Red Hat Advanced Cluster Security for Kubernetes, you can gain comprehensive Kubernetes security that includes the following use cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Visibility: See your entire landscape of images, registries, containers, deployments, and runtime behavior.</p>
</li>
<li>
<p>Vulnerability Management: Identify and remediate vulnerabilities in container images and Kubernetes across the entire software development life cycle.</p>
</li>
<li>
<p>Compliance: Audit your systems against CIS Benchmarks, NIST, PCI, and HIPAA, with interactive dashboards and one-click audit reports.</p>
</li>
<li>
<p>Network Segmentation: Visualize existing connections and enforce tighter segmentation using Kubernetes-native controls to reduce your blast radius.</p>
</li>
<li>
<p>Risk Profiling: See all your deployments ranked by risk level, using context from Kubernetes' declarative data, to prioritize remediation.</p>
</li>
<li>
<p>Configuration Management: Apply best practices for Docker and Kubernetes to harden your environment for a more secure and stable application.</p>
</li>
<li>
<p>Threat Detection: Use rules, automated allow lists, and baselining to identify suspicious activity in your running applications accurately.
Incident Response: Take action, from failing builds and blocking deployments to killing pods and thwarting attacks, using Kubernetes for enforcement.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_acs_architecture"><a class="anchor" href="#_acs_architecture"></a>ACS Architecture</h3>
<div class="paragraph">
<p>The ACS Platform installs as a set of pods in your Kubernetes or OpenShift cluster and includes the following components:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-2-2.png" alt="acs 2 2">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#centralized-components_acs-architecture">Central</a>: [Centralized components] Central is the main component of Red Hat Advanced Cluster Security for Kubernetes, and it is installed as a Kubernetes deployment. It handles data persistence, API interactions, and user interface (Portal) access. You can use the same Central instance to secure multiple OpenShift Container Platform or Kubernetes clusters.</p>
</li>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#centralized-components_acs-architecture">Scanner</a>: [Centralized component] Red Hat Advanced Cluster Security for Kubernetes includes an image vulnerability scanning component called Scanner. It analyzes all image layers to check for known vulnerabilities from the Common Vulnerabilities and Exposures (CVEs) list. The Scanner also identifies vulnerabilities in package managers' packages and dependencies for multiple programming languages.</p>
</li>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#per-cluster-components_acs-architecture">Sensor</a>: [1 x Per Cluster] Red Hat Advanced Cluster Security for Kubernetes uses the Sensor component to monitor Kubernetes and OpenShift Container Platform clusters. It handles interactions with the OpenShift Container Platform or Kubernetes API server for policy detection and enforcement, and it coordinates with Collector.</p>
</li>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#per-cluster-components_acs-architecture">Admission controller</a>: [1 x Cluster] The admission controller prevents users from creating workloads that violate security policies in Red Hat Advanced Cluster Security for Kubernetes. [1 x Admission Controller]</p>
</li>
<li>
<p><a href="https://redhat-scholars.github.io/acs-workshop/acs-workshop/03-overview-acs.html#acs_architecture">Collector</a>: [1 x Node OCP/K8s Nodes] Collector collects and monitors information about container runtime and network activity. It then sends the collected information to Sensor.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workshop_setup"><a class="anchor" href="#_workshop_setup"></a>Workshop Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_deploying_demo_application_sources_mandatory"><a class="anchor" href="#_deploying_demo_application_sources_mandatory"></a>Deploying Demo Application Sources - MANDATORY</h3>
<div class="paragraph">
<p>In order to have the applications and vulnerabilities necessary for the demo, we need to introduce a few vulnerable applications into the cluster.</p>
</div>
<div class="paragraph">
<p>The command below will clone the tutorial sources and set the <strong>TUTORIAL_HOME</strong> environment variable to point to the root directory of the tutorial and deploy the applications:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/openshiftdemos/openshift-ops-workshops acs-workshop
export TUTORIAL_HOME="$(pwd)/acs-workshop"
kubectl apply -f $TUTORIAL_HOME/workshop/demo-apps/configuration --recursive
kubectl apply -f $TUTORIAL_HOME/workshop/demo-apps/ --recursive</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE</strong> This command applies a plethora of manifests to your environment. The important part is that the deployments are up and running. The</p>
<p class="tableblock">Run the following command and ensure that the applications are up and running</p></td>
</tr>
</tbody>
</table>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get deployments -l demo=acs -A</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAMESPACE      NAME               READY   UP-TO-DATE   AVAILABLE   AGE
backend        api-server         1/1     1            1           0d
frontend       asset-cache        1/1     1            1           0d
log4shell      log4shell-app      3/3     3            3           0d
medical        reporting          1/1     1            1           0d
operations     jump-host          1/1     1            1           0d
payments       visa-processor     1/1     1            1           0d
spring4shell   spring4shell-app   3/3     3            3           0d</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_the_acs_dashboard"><a class="anchor" href="#_accessing_the_acs_dashboard"></a>Accessing the ACS Dashboard</h3>
<div class="paragraph">
<p>The ACS password will be necessary to access the dashboard. The information to access the ACS dashboard is found on the main access page of the demo.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE</strong> You will get a warning page that the webpage is not private. During setup, ACS can utilize your certification server to avoid these errors.</p>
<p class="tableblock">It is also best practice to integrate the application with your authentication server.</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click <strong>Advanced</strong></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-warning-00.png" alt="acs warning 00">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Click "Proceed to central-stackrox&#8230;&#8203;."</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-warning-01.png" alt="acs warning 01">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_in_the_acs_dashboard"><a class="anchor" href="#_working_in_the_acs_dashboard"></a>Working in the ACS Dashboard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When logging into ACS, you will be redirected to the dashboard&#8217;s main view.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE:</strong> For the following sections, please note that the order in which the images appear or the number of components affected may vary depending on versions and other applications running in the cluster.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/acs-dashboard-00.png" alt="acs dashboard 00">
</div>
</div>
<div class="paragraph">
<p>This central view will display a high-level view of the information about the Kubernetes clusters. It is essential to understand the primary components to navigate it effectively.</p>
</div>
<div class="paragraph">
<p>In the ACS Dashboard, we have three main sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The header</p>
</li>
<li>
<p>The menu</p>
</li>
<li>
<p>The information</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_dashboard_header"><a class="anchor" href="#_dashboard_header"></a>Dashboard Header</h3>
<div class="imageblock">
<div class="content">
<img src="_images/acs-dashboard-01.png" alt="acs dashboard 01">
</div>
</div>
<div class="paragraph">
<p>The header contains the following (from left to right):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The drop-down menu</p>
</li>
<li>
<p>The search bar</p>
</li>
<li>
<p>The roxctl CLI</p>
</li>
<li>
<p>Light or dark mode</p>
</li>
<li>
<p>Cluster status and problems</p>
</li>
<li>
<p>Help bar</p>
</li>
<li>
<p>User information</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dashboard_left_menu"><a class="anchor" href="#_dashboard_left_menu"></a>Dashboard Left Menu</h3>
<div class="imageblock">
<div class="content">
<img src="_images/acs-dashboard-02.png" alt="acs dashboard 02">
</div>
</div>
<div class="paragraph">
<p>In the left part of the dashboard, we can see the different sections we can access in ACS to gather information about the security in the clusters we have configured in ACS. Later we will go deeper into a few of them. For the time being, we will introduce each of these:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Dashboard</strong>: where we are at this moment. We can get a summary vision of our environment.</p>
</li>
<li>
<p><strong>Network Graph</strong>: we can get information about the configured network flows and the real ones. We can use it to create Network Policies to implement network segmentation.</p>
</li>
<li>
<p><strong>Violations</strong>: we can get all the events that do not match the defined security policies.</p>
</li>
<li>
<p><strong>Compliance</strong>: we can get compliance with our environment according to several industries and regulatory security standards such as PCI DSS.</p>
</li>
<li>
<p><strong>Vulnerability Management 2.0</strong>: Vulnerability Management 2.0 focus on workload vulnerabilities and is in Tech preview. Take a look when you get a chance!*
<strong>Vulnerability Management 1.0</strong>: get information about known vulnerabilities affecting your environment. Not only deployed workloads but infrastructure as well.</p>
</li>
<li>
<p><strong>Configuration Management</strong>: review configuration to prevent possible misconfigurations which can lead to security issues.</p>
</li>
<li>
<p><strong>Risk</strong>: review risks affecting your environment, such as suspicious executions.</p>
</li>
<li>
<p><strong>Platform</strong> Configuration: ACS configuration and integrations.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dashboard_information"><a class="anchor" href="#_dashboard_information"></a>Dashboard Information</h3>
<div class="paragraph">
<p>The main dashboard gives us a summary of the security state of the whole environment. this information can be adjusted by clicking on the filters on the top right of the page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-dashboard-03.png" alt="acs dashboard 03">
</div>
</div>
<div class="paragraph">
<p>You can also filter information by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cluster</p>
</li>
<li>
<p>Node</p>
</li>
<li>
<p>Violation</p>
</li>
<li>
<p>Deployments</p>
</li>
<li>
<p>Images</p>
</li>
<li>
<p>Secrets</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-dashboard-04.png" alt="acs dashboard 04">
</div>
</div>
<div class="paragraph">
<p>Each tab at the top can be clicked to see more and the powerful search bar allows you to drill down into the ACS database for more information about any information available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HOMEWORK</strong> &#8594; If you have extra time, alter and click through the individual dashboard panels. They will take you to other sections of the ACS dashboard with the filters already applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vulnerability_management_dashboard_1_0"><a class="anchor" href="#_vulnerability_management_dashboard_1_0"></a>Vulnerability Management Dashboard (1.0)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s dive into the Vulnerability Management section of this lab, a familiar topic for most security teams. Click the <strong>Vulnerability Management 1.0</strong> tab, and then select <strong>Dashboard</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-vuln-00.png" alt="acs vuln 00">
</div>
</div>
<div class="paragraph">
<p>The overview provides several important reports - where the vulnerabilities are, the most widespread or the most recent, where Docker images are coming from, and important vulnerabilities in the cluster itself.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-vuln-01.png" alt="acs vuln 01">
</div>
</div>
<div class="paragraph">
<p>More important than fixing any vulnerability is establishing a process to keep container images updated and to prevent the promotion through the pipeline for images with serious, fixable vulnerabilities. ACS displays this through the <strong>Top Risky Deployments by CVE and CVSS Score</strong>. ACS takes the container&#8217;s configuration and vulnerability details to show you the most <strong>at risk</strong> deployments in your cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-vuln-02.png" alt="acs vuln 02">
</div>
</div>
<div class="paragraph">
<p>Above the <strong>Risky Deployment</strong> section, there are buttons to link you to all policies, CVEs, and images, and a menu to bring you to reports by cluster, namespace, deployment, and component. The vulnerability dashboard can be filtered by clicking the <strong>Fixable CVSS</strong> score button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-vuln-03.png" alt="acs vuln 03">
</div>
</div>
<div class="paragraph">
<p>Locate the <strong>Top Riskiest Images</strong> panel. Here you can see the CVEs associated with containers currently running in the cluster. The goal is to find the log4shell exploit in your cluster and block that container from being pushed in the future.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-vuln-04.png" alt="acs vuln 04">
</div>
</div>
<div class="paragraph">
<p>In the <strong>Top Riskiest Images</strong> panel, click on the <strong>VIEW ALL</strong> button.</p>
</div>
<div class="sect2">
<h3 id="_image_overview_and_details"><a class="anchor" href="#_image_overview_and_details"></a>Image Overview and Details</h3>
<div class="paragraph">
<p>Now you will see that the images are listed here in order of risk, based on the number and severity of the vulnerabilities present in the components in the images.</p>
</div>
<div class="paragraph">
<p>Take a look:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-risk-00.png" alt="acs risk 00">
</div>
</div>
<div class="paragraph">
<p>Notice which images are more exposed. Not only can we see the number of CVEs affecting the images, but which of them are fixable? We can also see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation date</p>
</li>
<li>
<p>Scan time</p>
</li>
<li>
<p>Image OS</p>
</li>
<li>
<p>Image status</p>
</li>
<li>
<p>How many deployments are using the vulnerable image</p>
</li>
<li>
<p>The total components in the image</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can click and get information about the CVEs and which are fixable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Top Riskiest Images, <strong>find and click on</strong> the image <strong>visa-processor:latest-v2</strong>. You will review the images' components and violations.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-risk-01.png" alt="acs risk 01">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE</strong> If you cannot find the <strong>visa-processor:latest-v2</strong> image, use the search bar to filter for the specific image you want.</p>
<p class="tableblock">If you click the search bar, you will be shown the different labels you can search by. Click <strong>Image</strong> and type visa until the correct image comes up. You can use this method of searching in all search bars within the ACS dashboard.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/acs-risk-02.png" alt="acs risk 02">
</div>
</div>
<div class="paragraph">
<p>Move on to the next section only when the dashboard displays the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-risk-03.png" alt="acs risk 03">
</div>
</div>
<div class="sect3">
<h4 id="_acs_vulnerability_scanner"><a class="anchor" href="#_acs_vulnerability_scanner"></a>ACS Vulnerability Scanner</h4>
<div class="paragraph">
<p>ACS' built-in vulnerability scanner breaks down images into layers and components - where components can be operating-system installed packages or dependencies installed by programming languages like Python, Javascript, or Java. The <strong>Image Summary</strong> provides the essential security details of the image overall, with links to the components. Below you can see why the image is ranked as a critically vulnerable application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the DETAILS &amp; METADATA â†’ Image OS panel, the information you see there tells you that this image has a severe security problem - the base image was imported several years ago (Debian 8 - 2015).</p>
</li>
<li>
<p>At the top of the page is the warning that CVE data is stale - that this image has a base OS version whose distribution has stopped providing security information and likely stopped publishing security fixes.</p>
</li>
<li>
<p>Scroll down the page. In the <strong>Image Findings</strong> section, you find the details of the image vulnerabilities. There are 526 fixable vulnerabilities in the cluster (at the time of the creation of this workshop.)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-risk-04.png" alt="acs risk 04">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-5.png" alt="risk 5">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Above the <strong>Image Findings</strong> section, click on the <strong>Dockerfile</strong> tab:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-6.png" alt="risk 6">
</div>
</div>
<div class="paragraph">
<p>The Dockerfile tab view shows the layer-by-layer view, and, as you can see, the most recent layers are also several years old. Time is not kind to images and components - as vulnerabilities are discovered, ACS will display newly discovered CVEs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-risk-06.png" alt="acs risk 06">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE</strong> It is not practical to ask your teams to fix Linux or Javascript - but we think it is reasonable to ask them to pick up fixes published by those communities.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_log4shell_cve_vulnerability_analysis"><a class="anchor" href="#_log4shell_cve_vulnerability_analysis"></a>log4shell CVE Vulnerability Analysis</h3>
<div class="paragraph">
<p>It is time to find the components that have the log4shell vulnerability in your cluster.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Head back to the <strong>Top Riskiest Images</strong> Dashboard. Either by clicking the <strong>'X'</strong> or by click the riskiest image dashboard from the Vulnerability Management (1.0) dashboard</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-00.png" alt="acs log4shell 00">
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-01.png" alt="acs log4shell 01">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Search for the log4shell vulnerability using its CVE number (CVE-2021-44228)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-03.png" alt="acs log4shell 03">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-04.png" alt="acs log4shell 04">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>How many images are affected by the vulnerability?</p>
</li>
<li>
<p>How many deployments contain the vulnerability?</p>
</li>
<li>
<p>Why do you think the risk priority is where it is?</p>
</li>
<li>
<p>Should the risk priority be higher? Or lower?</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The log4shell CVE is very serious - scoring 10/10 - and is fixable.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-05.png" alt="acs log4shell 05">
</div>
</div>
<div class="paragraph">
<p>Luckily there is only <strong>ONE</strong> image being affected by this vulnerability, so you could go directly to the source and fix all three deployments in one opportunity.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relating_image_cves_with_kubernetes_configuration_properties"><a class="anchor" href="#_relating_image_cves_with_kubernetes_configuration_properties"></a>Relating Image CVEs with Kubernetes Configuration Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All of this CVE detail is well and good, but it is a bit noisy. How do we judge the genuine risk - which vulnerabilities are likely to be exploited? Which vulnerabilities do we have to fix first?</p>
</div>
<div class="paragraph">
<p>ACS can use other sources of information in OpenShift to judge the risk that a given vulnerability would be exploited and set priorities for fixes.</p>
</div>
<div class="paragraph">
<p>The first risk factor - is the vulnerable component in a running deployment.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Click on the <strong>Risk</strong> panel to continue.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-10.png" alt="acs log4shell 10">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Find the log4shell application and click on the log4shell application and click the name to review the risk indicators.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-11.png" alt="acs log4shell 11">
</div>
</div>
<div class="paragraph">
<p>Take a look at the total amount of deployments in the cluster. If you remember, the log4shell image was approximately #6 in terms of risks based on CVSS score and other CVEs. So why is it up to #5 in this example?</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Review all of the risk indicators. Why does the risk score depend on the configuration AND the vulnerabilities present?</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-12.png" alt="acs log4shell 12">
</div>
</div>
<div class="paragraph">
<p>Next we want to look at the risk indicators assosicated with the <strong>visa-processor</strong> deployment we reviewed earlier.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click on the <strong>visa-processor</strong> deployment and review its risk indicators.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-13.png" alt="acs log4shell 13">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-log4shell-14.png" alt="acs log4shell 14">
</div>
</div>
<div class="paragraph">
<p>What do you think made the <strong>visa-processor</strong> deployment #1 in this example?</p>
</div>
<div class="paragraph">
<p>Factors that play into the overall score are in the risk indicators section. These include, but are not limited to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Policy Violations</p>
</li>
<li>
<p>Image Vulnerabilities</p>
</li>
<li>
<p>Service Configuration</p>
</li>
<li>
<p>Service Reachability</p>
</li>
<li>
<p>Components Useful for Attackers</p>
</li>
<li>
<p>Number of Components in an Image</p>
</li>
<li>
<p>Image Freshness</p>
</li>
<li>
<p>RBAC Configuration</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A primary reason for the <strong>visa-processor</strong> deployment to be ranked so high is that it is an ancient image (older than the log4shell app) WITH the apache struts viloation present. A good indicator of risk is that the older an image is, the more likely it will have a significant exploitable vulnerability.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">We will leave it to you to make risk assessments in the future. Let us get to enforcing a log4shell policy and stopping future deployments containing the vulnerability.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acs_policies"><a class="anchor" href="#_acs_policies"></a>ACS Policies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ACS has many built-in policies to detect activity related to attacker goals: gain a foothold, maintain a presence, move laterally, and exfiltrate data. The continuous runtime monitoring observes all container activity and will automatically respond to events with appropriate enforcement and notification. However, that would be missing out on an opportunity - ACS wants to go one step further, to take advantage of containers' ephemeral, immutable nature to improve security in a measurable way from now on.</p>
</div>
<div class="paragraph">
<p>We want to use runtime incidents and vulnerabilities as a learning opportunity to improve security going forward by constraining how our containers can act. We achieve this by creating policies and implementing them early in the CI/CD process.</p>
</div>
<div class="paragraph">
<p>In this section we will outline how to find specific policies. In the DevSecOps workshop we will enforce certain policies in the build, deploy and runtime phase.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the left-hand side of the application, click the <strong>Platform Configuration</strong> tab and <strong>select</strong> <strong>Policy Management</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-policy-00.png" alt="acs policy 00">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Filter through the policies and find the <strong>log4shell</strong> policy.</p>
</li>
</ol>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>NOTE The easiest way is to select the <strong>Policy</strong> filter and then type <strong>log</strong></p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-policy-01.png" alt="acs policy 01">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Click on the policy to learn more about the policy itself and the enforcement mechanism.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-policy-02.png" alt="acs policy 02">
</div>
</div>
<div class="paragraph">
<p>If you click the actions button, you will see how easy it is to edit, clone, export or disable these policies. We also recommended cloning the policies and adding or removing specific filters as you need them.</p>
</div>
<hr>
<div class="paragraph">
<p>Congratulations! You&#8217;ve made it through vulnerability management and are ready to implement your security policies during the build, deploy and runtime. Head to the next lab to implement these security policies into your pipeline.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
