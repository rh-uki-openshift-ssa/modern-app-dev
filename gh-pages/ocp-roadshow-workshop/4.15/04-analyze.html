<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Analyze :: OpenShift Roadshow Workshop 2024</title>
    <link rel="canonical" href="http://localhost:3000/rhs-openshift-starter-guides/index.html/ocp-roadshow-workshop/4.15/04-analyze.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () { 
      const urlParams = new URLSearchParams(window.location.search);
      const clusterName = urlParams.get('CLUSTER_SUBDOMAIN');
      const projectName = urlParams.get('PROJECT');
      if (clusterName) {
        showCluster( clusterName );
      }
      else {
        showClusterForm();
      }

      if (projectName) {
        showProject( projectName );
      } else {
        showProjectForm();
      }
    } );


    function sliceCluster(clusterName){
      if (clusterName.length > 70) {
          return "..." + clusterName.slice(35);
      } else {
          return clusterName;
      }
    }

    function showCluster( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "none";
      document.getElementById('navbar-form-filled').style.display = "flex";
      document.getElementById('cluster_subdomain').textContent = sliceCluster(clusterName);
      document.getElementById('clusterfield2').value = clusterName;

    }

    function showClusterForm( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "flex";
      document.getElementById('navbar-form-filled').style.display = "none";
    }

    function gowithcluster() {
      elClusterInput = document.getElementById('clusterfield');
      elProjectInput = document.getElementById('projectfield2');

      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

    function showProject( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "none";
      document.getElementById('navbar-form-project-filled').style.display = "flex";
      document.getElementById('project').textContent = projectName;
      document.getElementById('projectfield2').value = projectName;
    }

    function showProjectForm( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "flex";
      document.getElementById('navbar-form-project-filled').style.display = "none";
    }

    function gowithproject() {
      elProjectInput = document.getElementById('projectfield');
      elClusterInput = document.getElementById('clusterfield2');
      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://localhost:3000/rhs-openshift-starter-guides/index.html">OpenShift Roadshow Workshop 2024</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item" id="navbar-form-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithcluster();">
            <input size="40" id="clusterfield" type="text" placeholder="Enter Cluster Subdomain">
            <input type="hidden" id="projectfield2" name="projectfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="cluster_subdomain"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

         <div class="navbar-item" id="navbar-form-project-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithproject();">
            <input size="40" id="projectfield" type="text" placeholder="Enter Project Name">
            <input type="hidden" id="clusterfield2" name="clusterfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-project-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="project"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>
<!---
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-scholars.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
--->
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="ocp-roadshow-workshop" data-version="4.15">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OCP Roadshow Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="xx-workshop-credentials-links.html">Credentials and links</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="10-security-infrastructure-introduction.html">Security &amp; Infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-application-management-basics.html"><strong>04</strong> - Application Management Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-application-storage-basics.html"><strong>05</strong> - Application Storage Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-networking.html"><strong>06</strong> - Networking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14-acs-vulnerability.html"><strong>07</strong> - ACS Vulnerability Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15-acm.html"><strong>08</strong> - ACM multicluster Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OCP Roadshow Workshop</span>
    <span class="version">4.15</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OCP Roadshow Workshop</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">4.15</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OCP Roadshow Workshop</a></li>
    <li><a href="04-analyze.html">Analyze</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/marrober/data/git-repos/rhuki-openshift-ssa/modern-app-dev/documentation/modules/ROOT/pages/04-analyze.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Analyze</h1>
<div class="sect1">
<h2 id="_goals_of_this_lab"><a class="anchor" href="#_goals_of_this_lab"></a>Goals of this lab</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As you have realized in the previous <strong>assessment</strong> exercise, you need to analyze the legacy applications in terms of identifying the actual lines of code for the modernization issues as well as estimating time and effort for the modernization project.</p>
</div>
<div class="paragraph">
<p>The goal of this exercise is to analyze the <em>customers</em> application by scanning its source code and properties using the <code>Analysis</code> capability in MTA. Then you&#8217;ll review the analysis report and get started with the actual code modification.</p>
</div>
<div class="paragraph">
<p>MTA <em>Analysis</em> is used by organizations for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Planning and work estimation</p>
</li>
<li>
<p>Identifying migration issues and providing solutions</p>
</li>
<li>
<p>Detailed reporting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And has several capabilities such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Built-in rules and migration paths</p>
</li>
<li>
<p>Rule extensibility and customization</p>
</li>
<li>
<p>Ability to analyze source code or application archives</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Read more about it in the <a href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_applications/6.0/html-single/introduction_to_the_migration_toolkit_for_applications/index#new-mta-features_getting-started-guide">MTA Features</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_1_analyze_customers_application_using_mta"><a class="anchor" href="#_3_1_analyze_customers_application_using_mta"></a>3.1. Analyze Customers Application using MTA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, you need to configure <strong>Git repositories</strong> to refer to your <a href="https://gitea.%CLUSTER_SUBDOMAIN%/%PROJECT%/modern-app-dev" class="bare">https://gitea.%CLUSTER_SUBDOMAIN%/%PROJECT%/modern-app-dev</a> when you analyze your inventory and applications using MTA.</p>
</div>
<div class="paragraph">
<p>In <strong>Administration</strong> view, select <strong>Repositories &gt; Git</strong>. <code>Toggle</code> the <strong>Consume insecure Git repositories</strong> switch to the right.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mta-admin-git.png" alt="admin git">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can log in to the Gitea repository with the provide credentials.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Go back to the <code>Application inventory</code> page in the <strong>Migration</strong> perspective. Click on pencil (edit) icon for the customers inventory.</p>
</div>
<div class="paragraph">
<p>Update application with the following source code information.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Repository type - <code>Git</code></p>
</li>
<li>
<p>Source Repository - <code><a href="https://gitea.%CLUSTER_SUBDOMAIN%/%PROJECT%/modern-app-dev.git" class="bare">https://gitea.%CLUSTER_SUBDOMAIN%/%PROJECT%/modern-app-dev.git</a></code></p>
</li>
<li>
<p>Branch - <code>main</code></p>
</li>
<li>
<p>Root path - <code>package-legacy</code></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/application-update-git.png" alt="application-update-git">
</div>
</div>
<div class="paragraph">
<p>Select <code>Save</code>.</p>
</div>
<div class="paragraph">
<p>Select the <code>Analysis</code> tab. When you click on the <code>Customers</code> application, <code>Analyze</code> button will be enabled. Then, click on <strong>Analyze</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/application-analysis.png" alt="application-analysis">
</div>
</div>
<div class="sect2">
<h3 id="_3_1_1_analysis_mode"><a class="anchor" href="#_3_1_1_analysis_mode"></a>3.1.1. Analysis mode</h3>
<div class="paragraph">
<p>Select <code>Source dode</code> in Analysis mode popup.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/add-applications.png" alt="Add applications">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Next</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_3_1_2_set_targets"><a class="anchor" href="#_3_1_2_set_targets"></a>3.1.2. Set targets</h3>
<div class="paragraph">
<p>You will now be presented with options for transformation targets. Here we will select several targets based on the technologies we are moving to:</p>
</div>
<div class="paragraph">
<p>Since this is going to be a linux container, it makes sense to do a sanity check to avoid things like Windows filesystem paths and other non-container- or non-Linux-friendly issues. We also going to investigate removing our reliance on a proprietary JDK distribution, so we going to select OpenJDK as a target.</p>
</div>
<div class="paragraph">
<p>Click on <code>Containers</code>, <code>Linux</code>, and <code>OpenJDK</code> as the targets.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/configure-analysis-checked.png" alt="Configure Analysis">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Next</code>.</p>
</div>
<div class="paragraph">
<p>Select <code>Application and internal dependencies only</code> for the scope of dependencies.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/packages.png" alt="Select packages">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Next</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_3_1_3_advanced"><a class="anchor" href="#_3_1_3_advanced"></a>3.1.3. Advanced</h3>
<div class="paragraph">
<p>You will now be presented with options for custom rules.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/custom-rules.png" alt="Custom rules">
</div>
</div>
<div class="paragraph">
<p>MTA Analysis uses a custom rule engine for the analysis. It comes with many rules out of the box to support the different migration paths, but it can be extended. Custom rules can be developed with a very simple XML syntax and used as part of the analysis. We&#8217;ve provided some custom rules which will detect the usage of a specific library that we know has been used at Globex in the past and make suggestions for changes to be performed to remove it.</p>
</div>
<div class="paragraph">
<p>Select <code>Repository</code> tab to refer to a custom rule (<code>corporate-framework-config.windup.xml</code>) in the <strong>customrules</strong> directory of your Gitea repository.</p>
</div>
<div class="paragraph">
<p>Key in the following information in the repository page.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Repository type - <code>Git</code></p>
</li>
<li>
<p>Source Repository - <code><a href="https://gitea.%CLUSTER_SUBDOMAIN%/%PROJECT%/modern-app-dev.git" class="bare">https://gitea.%CLUSTER_SUBDOMAIN%/%PROJECT%/modern-app-dev.git</a></code></p>
</li>
<li>
<p>Branch - <code>main</code></p>
</li>
<li>
<p>Root path - <code>customrules</code></p>
</li>
<li>
<p>Associated credentials - <code>None</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In case you don&#8217;t see <code>None</code> in the <code>Associated credentials</code>, please leave it since the field is not mandatory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/add-repository-customrules.png" alt="add-repository-customrules">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Next</code>.</p>
</div>
<div class="paragraph">
<p>Next, you will be presented with options to fine tune the analysis. For now we will stick with the default options.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/fine-tune.png" alt="Fine tuning">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Next</code>.</p>
</div>
<div class="paragraph">
<p>Lastly, we are presented with a summary of the configuration for our analysis.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/finish-project.png" alt="Finish project">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Run</code>.</p>
</div>
<div class="paragraph">
<p>The analysis begins, and once it is finished you will be able to access the reports. Stay on this view until the analysis is finished.</p>
</div>
<div class="paragraph">
<p>Once it finishes, select <strong>Customers</strong> application. Then click on <code>Report</code> in the <strong>Reports</strong> tab on the right.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The analysis may take a few minutes as it must pull container images for Windup before executing the analysis.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/active-analysis.png" alt="Active analysis">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_2_understanding_the_report"><a class="anchor" href="#_3_2_understanding_the_report"></a>3.2. Understanding the report</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Dashboard gives an overview of the entire application migration effort. It summarizes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The incidents and story points by category</p>
</li>
<li>
<p>The incidents and story points by level of effort of the suggested changes</p>
</li>
<li>
<p>The incidents by package</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Story points are an abstract metric commonly used in Agile software development to estimate the relative level of effort needed to implement a feature or change. Migration Toolkit for Application uses story points to express the level of effort needed to migrate particular application constructs, and the application as a whole. The level of effort will vary greatly depending on the size and complexity of the application(s) to migrate.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the report is finished, click on the link to access the report. Click on <code>customers-tomcat.war</code> application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/report-view.png" alt="View report">
</div>
</div>
<div class="paragraph">
<p>The reports provide all kinds of information about the application, like the technologies it uses, dependencies, but most importantly issues that need to get fixed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/report-dashboard.png" alt="report dashboard">
</div>
</div>
<div class="paragraph">
<p>Click on the <code>Issues</code> tab.</p>
</div>
<div class="paragraph">
<p>This view shows us the list of issues that could prevent an application to successfully run on the target runtime. We can see that the application has a few mandatory issues that need to be addressed.</p>
</div>
<div class="paragraph">
<p>Click on <code>Hard coded IP address</code>.</p>
</div>
<div class="paragraph">
<p>By choosing the issue we can see where it was detected and view a hint on how to solve it.  It looks like the config files are pointing to some static IPs. That&#8217;s not good in a cloud / container environment!</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/report-hint.png" alt="report hint">
</div>
</div>
<div class="paragraph">
<p>Click on <code>File system issue</code>.</p>
</div>
<div class="paragraph">
<p>It looks like a problem has been detected on some class coming from the config library. We are analyzing the binary, so the dependencies have been analyzed as well.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/report-hint-fs.png" alt="report hint file system">
</div>
</div>
<div class="paragraph">
<p>Click on <code>Legacy configuration issue</code>.</p>
</div>
<div class="paragraph">
<p>It looks like the custom rule got triggered and found some issues with the source code.  This rule detects the use of a custom configuration library and gives some hints about what needs to be done to fix it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/report-hint-custom.png" alt="report hint custom rule">
</div>
</div>
<div class="paragraph">
<p>Click on the <code>io.konveyor.demo.ordermanagement.config.PersistenceConfig</code> file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/report-code.png" alt="report code">
</div>
</div>
<div class="paragraph">
<p>You can now see exactly where the issue is located in the source code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have now successfully analyzed the legacy application to learn what migration issues you have.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
